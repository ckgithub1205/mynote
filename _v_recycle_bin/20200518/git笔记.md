### git笔记

#### 1.git介绍

![](_v_images/20200515200530190_23709.png)


#### 2.git安装


#### 3.本地库与远程库的交互方式
![](_v_images/20200515184133802_10253.png)
上图是本地库和远程库的交互方式，涉及到：
- 团队内部协作
- 跨团队协作

#### 4.git命令行操作
1) 初始化本地仓库
```
    git init
```
![](_v_images/20200515190132776_31442.png)
生成.git隐藏目录,初始化后的项目目录结构，不要删除，也不要随意修改

2）设置签名
用于区分不同的开发人员的身份
- 项目级别/仓库级别，仅在当前项目范围内有效
```
git config user.name tom
git config user.email goodlucktom@qq.com
```
- 系统用户级别：登陆当前操作系统的用户范围
```
git config --global user.name tom
git config --global user.email goodlucktom@qq.com
```
- 级别优先级
-- 就近原则：项目级别优先级由于系统用户级别，两者都有时采用项目级别的签名
-- 如果只有系统用户级别的签名，就以系统用户级别的签名为准
-- 二者都没有是不允许的

项目级别的签名信息被保存在当前项目下的.git目录下的config文件中
![](_v_images/20200515192007021_22356.png)
系统用户级别的签名信息保存位置：
![](_v_images/20200515192408859_26313.png)
在用户家目录下的.gitconfig文件中

3）查询状态
```
git status
```
![](_v_images/20200515192705292_7982.png)
默认在master分支上，上图表示没有任何提交，也没有什么可提交的
![](_v_images/20200515193203756_165.png)
4）添加文件到暂存区
```
git add 
```
![](_v_images/20200515193306620_16252.png)
![](_v_images/20200515193703397_4021.png)
5)从暂存区删除文件
git rm --cache 文件名称
![](_v_images/20200515194153956_2755.png)
6）从暂存区提交到本地库
```
git commit -m "说明内容"
```
![](_v_images/20200515194503252_6476.png)
对文件进行修改编辑后，git可以检测出来，
![](_v_images/20200515194959923_23554.png)
7）查看提交的历史版本记录
```
git log
```
git log可以附加一些参数
![](_v_images/20200515230115269_13568.png)

```
git log --pretty=oneline         # 只显示一行

git log --online   # 只显示部分哈希值，并且只显示当前版本以及过去的版本

git reflog      #  显示对应修改版本的移动步数
```
![](_v_images/20200515230934071_18385.png)

所谓的历史版本记录，实际上是有个HEAD指针在帮助我们管理
![](_v_images/20200515231933478_28636.png)
版本穿梭的三种方式
1）基于索引值的操作    推荐
```
git reset --hard 哈希值 
```
这里只需要局部的索引值就可以了。
2）使用^符号
```
git reset --hard HEAD^
```
一个异或符号表示后退一步，多个异或符号表示后退n步
3）使用~符号
git reset --hard HEAD~n
其中n是几，就表示后退几个版本

第二和第三中方法都只能后退，无法前进

##### 获取git对应命令帮助
###### git help 命令

8)文件比较
```
git diff [文件名称]
 ```
 
![](_v_images/20200516070139625_14840.png)

1） git diff 命令默认是工作区和暂存区进行比较
2） git diff HEAD [文件名称] 是工作区和本地库进行比较
3）也可以和历史版本进行比较，例如：
      git diff HEAD^ [文件名称]
      表示和上个版本的文件进行比较

9）分支管理
（1）什么是分支？
在控制版本过程中，使用多条线同时推进多个任务。
![](_v_images/20200516072441988_24927.png)
（2）分支的好处
- 同时并行推进多个开发功能，提高开发效率
- 各个分支在开发过程中，如果某一个分支开发失败，不会对其他分支有任何影响，失败的分支删除重新开始即可。

```
#1.创建分支
git branch [分支名]

#2.查看分支
git branch -v

#3.切换分支
git checkout [分支名称]

#4.合并分支
#1）切换到接受修改的分支（被合并，添加新内容）上
#2）执行merge命令
git merge [分支名称]
```


![](_v_images/20200516073639721_12436.png)

#####如何解决合并的冲突？
#####四个字：手动解决
![](_v_images/20200517230747941_17167.png)
冲突的解决：
（1）编辑文件，删除特殊符号
 (2)把文件修改到满意的程度，保存退出
（3）git add [文件名]
 (4)git commit -m "日志信息"

#### Hash算法简介

![](_v_images/20200517232218133_2946.png)

![](_v_images/20200517232754676_16889.png)

文件的hash值是用来提供校验文件用的

#### Git版本数据管理机制

![1589774848](_v_images/20200518120908961_27018.png)



















#### 笔记总结
1.状态查看操作    
           查看工作区,暂存区状态      git status
2.添加操作  
           将工作区的"新建/修改"添加到暂存区      git add [file name]
3.提交操作  
           将暂存区的内容提交到本地库                git commit -m "说明内容" [file name]
4.从暂存区删除文件  
            git rm --cache [file name]
5.显示历史版本记录
-            git log          显示完全的信息
-            git log --pretty=oneline          只显示 一行信息
-            git log --oneline                     只显示部分哈希值

-            git reflog             显示移动到对应版本需要移动的步数
            注意：多屏显示控制方式:
                      空格     向下翻页
                      b         向上翻页
                      q         推出
6.版本穿梭操作
1）可以穿梭到任意版本
       git reset --hard 索引值
2）只可以向前穿梭
        git reset --hard HEAD^
        其中如果有多个异或符号，表示向前回退多少个版本 
3）只可以向前穿梭
      git reset --hard HEAD~n
      n是多少，表示向前回退多少个版本

6.1 reset的三个参数对比
(1)  --soft参数
         仅仅在本地库移动HEAD指针
           ![](_v_images/20200516001408239_19315.png)
(2)  --mixed 参数
         在本地库移动指针
         重置暂存区
         ![](_v_images/20200516001610602_8189.png)
(3) --hard参数
        在本地库移动HEAD指针
        重置暂存区
        重置工作区

***因为git记录了所有的提交记录，所以可以通过版本穿梭的方式，找回被永久删除的文件*****
7.删除文件找回
```
git reset --hard [指针位置]   
```
删除操作已经提交到本地库：指针位置指向历史记录
删除操作尚未提交到本地库：指针位置使用 HEAD
前提：删除前，文件存在时的状态提交到了本地库
8.比较文件差异
1）git diff [文件名称]
将工作区中的文件和暂存区中的文件进行比较
2）git diff HEAD [文件名称]
将工作区中的文件和本地库的文件进行比较
3) git diff HEAD~n [文件名称]
也可以将工作区的文件和历史版本中的某个文件进行比较
4）git diff
不加文件名称，表示比较所有文件的变化


